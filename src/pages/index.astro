---
import MainLayout from "../layouts/MainLayout.astro";
import homeData from "../data/home-data.json";
---

<MainLayout title="Portfolio - Accueil" namespace="home">
  <!-- Hero Section -->
  <section
    class="mainHome absolute inset-0 w-full h-screen m-auto overflow-hidden"
  >
    <nav
      class="absolute top-1/2 left-0 right-0 z-20 px-4 md:px-5 -translate-y-full pb-5"
    >
      <ul class="flex items-center justify-between w-full">
        <li>
          <a class="ts-little transition-link block" href="/about" data-barba
            >About</a
          >
        </li>
        <li>
          <a class="ts-little transition-link block" href="/contact" data-barba
            >Contact</a
          >
        </li>
      </ul>
    </nav>

    <div
      id="navigation-info"
      class="absolute top-1/2 left-0 right-0 z-20 max-md:h-1/2 px-4 md:px-5"
    >
      <div class="relative">
        <div class="relative w-full h-[1px] bg-[#EAE8DE] opacity-30"></div>
        <div
          class="progress-bar absolute top-0 left-0 h-full bg-white w-full translate-y-1/2"
          style="transform: scaleX(0); transform-origin: left;"
        >
        </div>
      </div>
      <div class="grid grid-cols-8 md:grid-cols-12 gap max-md:h-full pt-5">
        <div
          class="col-span-8 md:col-span-7 order-2 md:order-1 max-md:flex max-md:justify-center max-md:items-end max-md:pb-5"
        >
          <h1 class="ts-title text-center md:text-left">
            Matthias benoit<br />
            French creative developer
          </h1>
        </div>
        <div
          class="col-span-8 md:col-span-5 lg:col-span-3 xl:col-span-2 md:col-start-8 lg:col-start-10 xl:col-start-11 flex flex-col items-end order-1 md:order-2 ts-body"
        >
          {/* Titres des projets et numéro */}
          <div class="flex flex-col items-end gap-4 w-full">
            <div
              class="project-info flex items-start justify-between gap-4 w-full"
            >
              <div class="project-title flex-1">
                {homeData.projects[0].title || "Projet sans titre"}
              </div>
              <p class="project-counter ts-body">
                01 / 0{homeData.projects.length}
              </p>
            </div>

            {/* Bouton Discover */}
            {
              homeData.projects[0].slug && (
                <a
                  href={`/projects/${homeData.projects[0].slug}`}
                  class="discover-btn flex items-center gap-2"
                >
                  <svg
                    width="10"
                    height="9"
                    viewBox="0 0 10 9"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M1 0V5.5H9M9 5.5L6 2.5M9 5.5L6 8.5"
                      stroke="#EAE8DE"
                    />
                  </svg>
                  Discover
                </a>
              )
            }
          </div>

          {/* Boutons de navigation */}
          <div class="w-full mt-4">
            <div class="flex items-center justify-between">
              <button
                class="carousel-btn carousel-btn-prev ts-body"
                aria-label="Projet précédent"
              >
                Previous
              </button>

              <button
                class="carousel-btn carousel-btn-next ts-body"
                aria-label="Projet suivant"
              >
                Next
              </button>
            </div>
          </div>

          {/* Bouton All projects */}
          <div class="mt-4">
            <button
              class="all-projects-btn flex items-center gap-4 ts-little"
            >
              All projects
              <span class="w-[8px] h-[10px] bg-white"></span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div
      class="wrapperProjects absolute inset-0 w-full m-auto"
      data-projects={JSON.stringify(homeData.projects)}
    >
      {
        homeData.projects.map((project, index) => (
          <div
            class="slider-slide absolute inset-0 w-full h-full"
            data-index={index}
            data-slug={project.slug}
          >
            <div class="slider-slide__mask absolute inset-0 w-full h-full overflow-hidden">
              <img
                src={project.image}
                alt={project.title}
                class="w-full h-full object-cover"
              />
              <div class="slider-slide__overlay absolute inset-0 w-full h-full bg-[#00000033]" />
            </div>
          </div>
        ))
      }
    </div>
  </section>
</MainLayout>

<script>
  import "../scripts/home-slider.js";
</script>
